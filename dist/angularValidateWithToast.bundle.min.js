"use strict";angular.module("angularValidateWithToast").directive("bsyFormValidate",["ionicToast",function(e){return{restrict:"A",require:"ngModel",scope:{bsyFormValidate:"="},link:function(s,i,t,a){a.validate=!1;var r=i.controller("form"),o=i.parent();s.defaultTips={required:"This field is required",minlength:"This field does not match the min length",maxlength:"This field does not match the max length",pattern:"This field is not right",number:"This field should be a number"},s.$watch(function(){return a.$valid+"_"+r.$submitted+"_"+a.$dirty},function(){a.$valid?o.addClass("has-success").removeClass("has-error"):a.$invalid&&r.$submitted?o.addClass("has-error").removeClass("has-success"):a.$invalid&&a.$dirty?o.addClass("has-error").removeClass("has-success"):o.removeClass("has-success").removeClass("has-error")});var n=function(s){e.show(s,"top",!1,1e3)};i.on("focus",function(e){if(r.showToast&&a.$invalid){r.showToast=!1;var i=Object.keys(a.$error)[0];void 0==s.bsyFormValidate&&(s.bsyFormValidate=s.defaultTips);var t=s.bsyFormValidate[i];void 0==t&&(t=s.defaultTips[i]),n(t)}})}}}]).directive("checkForm",["$parse","$timeout",function(e,s){return{require:"^form",restrict:"A",priority:-1,link:function(e,i,t,a){var r=angular.element(i[0].form),o=a;o.$submitted=!1,o.showToast=!1,i.on("click",function(e){if(o.$invalid){var i=r[0].getElementsByClassName("ng-invalid"),t=i[0];s(function(){o.showToast=!0,o.$submitted=!0,t.focus()},0),e.stopImmediatePropagation(),e.preventDefault()}})}}}]);